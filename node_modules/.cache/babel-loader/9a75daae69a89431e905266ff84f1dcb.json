{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/vitaliy/Documents/GitHub/DonNTU_bpid_vigenere-feistel-2022/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _slicedToArray from\"/Users/vitaliy/Documents/GitHub/DonNTU_bpid_vigenere-feistel-2022/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import\"./App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CryptoJS=require(\"crypto-js\");function App(){var alphabetVisionare='abcdefghijklmnopqrstuvwxyz';var visionare=new Map();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),textOrigin=_useState2[0],setTextOrigin=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),textVisionare=_useState4[0],setTextVisionare=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),textFeistel=_useState6[0],setTextFeistel=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),textDFeistel=_useState8[0],setTextDFeistel=_useState8[1];var _useState9=useState('A'),_useState10=_slicedToArray(_useState9,2),key=_useState10[0],setKey=_useState10[1];useEffect(function(){if(key!==''&&key.match(/[A-Z]/i))shifrVisionare(textOrigin);},[key]);useEffect(function(){if(textVisionare!=='')shifrFeistel(textVisionare);},[textVisionare]);function keyChanged(e){if(e.target.value.length<=1)setKey(e.target.value.toUpperCase());}useEffect(function(){if(textFeistel!=='')decryptFeistel(textFeistel);},[textFeistel]);function fileLoad(e){var file=e.target.files[0];if(file===undefined)return;var reader=new FileReader();reader.readAsText(file);reader.onload=function(){setTextOrigin(reader.result);if(key!=='')shifrVisionare(reader.result);};}function alphabetGenerate(){var _iterator=_createForOfIteratorHelper(alphabetVisionare),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var x=_step.value;var y=new Map();var count=alphabetVisionare.indexOf(x);for(var i=0;i<alphabetVisionare.length;i++){if(count===alphabetVisionare.length)count=0;y.set(alphabetVisionare[i].toUpperCase(),alphabetVisionare[count].toUpperCase());count++;}visionare.set(x.toUpperCase(),y);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}function shifrVisionare(text){alphabetGenerate();text=text.split('').map(function(e){if(e.match(/[A-Z]/i)){if(e===e.toUpperCase())return visionare.get(e.toUpperCase()).get(key);else return visionare.get(e.toUpperCase()).get(key).toLowerCase();}else return e;}).join('');setTextVisionare(text);}function shifrFeistel(text){var keyHex=CryptoJS.enc.Utf8.parse(key.repeat(3));var encrypted=CryptoJS.DES.encrypt(text,keyHex,{mode:CryptoJS.mode.ECB,padding:CryptoJS.pad.Pkcs7});setTextFeistel(encrypted.toString());}function decryptFeistel(text){var keyHex=CryptoJS.enc.Utf8.parse(key.repeat(3));var decrypted=CryptoJS.DES.decrypt({ciphertext:CryptoJS.enc.Base64.parse(text)},keyHex,{mode:CryptoJS.mode.ECB,padding:CryptoJS.pad.Pkcs7});setTextDFeistel(decrypted.toString(CryptoJS.enc.Utf8));}return/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u041F\\u0418-18\\u0430 13 \\u0412\\u0430\\u0440\\u0438\\u0430\\u043D\\u0442 (\\u0412\\u0438\\u0436\\u0435\\u043D\\u0435\\u0440 + \\u0424\\u0435\\u0439\\u0441\\u0442\\u0435\\u043B\\u044C)\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0428\\u0438\\u0444\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0412\\u0438\\u0436\\u0438\\u043D\\u0435\\u0440\\u0430\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"file\",children:\"Choose file to upload\"}),/*#__PURE__*/_jsx(\"input\",{id:\"file\",name:\"fasf\",type:\"file\",accept:\".txt\",onChange:fileLoad}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"text\",children:\"Key\"}),/*#__PURE__*/_jsx(\"input\",{id:\"text\",type:\"text\",value:key,onChange:keyChanged})]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"origin\",children:\" Original Text:  \"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"origin\",value:textOrigin,readOnly:true,className:\"text\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"visionare\",children:\" Visionare:  \"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"visionare\",value:textVisionare,readOnly:true,className:\"text\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0428\\u0438\\u0444\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0424\\u0435\\u0439\\u0441\\u0442\\u0435\\u043B\\u044F\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"feistel\",children:\"  FeisteL: \"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"feistel\",value:textFeistel,readOnly:true,className:\"text\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"dfeistel\",children:\"  Decrypt FeisteL: \"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"dfeistel\",value:textDFeistel,readOnly:true,className:\"text\"})]});}export default App;","map":{"version":3,"sources":["/Users/vitaliy/Documents/GitHub/DonNTU_bpid_vigenere-feistel-2022/src/App.js"],"names":["React","useState","useEffect","CryptoJS","require","App","alphabetVisionare","visionare","Map","textOrigin","setTextOrigin","textVisionare","setTextVisionare","textFeistel","setTextFeistel","textDFeistel","setTextDFeistel","key","setKey","match","shifrVisionare","shifrFeistel","keyChanged","e","target","value","length","toUpperCase","decryptFeistel","fileLoad","file","files","undefined","reader","FileReader","readAsText","onload","result","alphabetGenerate","x","y","count","indexOf","i","set","text","split","map","get","toLowerCase","join","keyHex","enc","Utf8","parse","repeat","encrypted","DES","encrypt","mode","ECB","padding","pad","Pkcs7","toString","decrypted","decrypt","ciphertext","Base64"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\"\nimport \"./App.css\";\nlet CryptoJS = require(\"crypto-js\"\n)\nfunction App() {\n  const alphabetVisionare = 'abcdefghijklmnopqrstuvwxyz'\n  let visionare = new Map()\n\n  const [textOrigin, setTextOrigin] = useState('')\n  const [textVisionare, setTextVisionare] = useState('')\n  const [textFeistel, setTextFeistel] = useState('')\n  const [textDFeistel, setTextDFeistel] = useState('')\n  const [key, setKey] = useState('A')\n\n\n  useEffect(() => {\n    if(key !== '' && key.match(/[A-Z]/i))\n      shifrVisionare(textOrigin)\n  }, [key])\n  useEffect(() => {\n    if(textVisionare !== '')\n      shifrFeistel(textVisionare)\n  }, [textVisionare])\n  function keyChanged(e) {\n    if(e.target.value.length <= 1)\n      setKey(e.target.value.toUpperCase())\n  }\n  useEffect(() => {\n    if(textFeistel !== '')\n      decryptFeistel(textFeistel)\n  }, [textFeistel])\n\n  function fileLoad(e) {\n      let file = e.target.files[0]\n      if(file === undefined)\n        return\n      let reader = new FileReader()\n      reader.readAsText(file)\n\n      reader.onload = () => {\n        setTextOrigin(reader.result)\n        if(key !== '')\n          shifrVisionare(reader.result)\n      }\n  }\n  function alphabetGenerate() {\n    for(let x of alphabetVisionare) {\n      let y = new Map()\n      let count = alphabetVisionare.indexOf(x)\n      for(let i = 0; i < alphabetVisionare.length; i++) {\n        if(count === alphabetVisionare.length)\n          count = 0\n        y.set(alphabetVisionare[i].toUpperCase(), alphabetVisionare[count].toUpperCase())\n        count++\n      }\n      visionare.set(x.toUpperCase(), y)\n    }\n  }\n  function shifrVisionare(text) {\n    alphabetGenerate() \n    text = text.split('').map(e => {\n      if(e.match(/[A-Z]/i))\n        if(e === e.toUpperCase())\n          return visionare.get(e.toUpperCase()).get(key)\n        else\n          return visionare.get(e.toUpperCase()).get(key).toLowerCase()\n      else return e\n    }).join('')\n    setTextVisionare(text)\n  }\n  function shifrFeistel(text) {\n    let keyHex = CryptoJS.enc.Utf8.parse(key.repeat(3))\n    let encrypted = CryptoJS.DES.encrypt(text, keyHex, {\n      mode: CryptoJS.mode.ECB,\n      padding: CryptoJS.pad.Pkcs7\n    })\n    setTextFeistel(encrypted.toString())\n  }\n  function decryptFeistel(text) {\n    let keyHex = CryptoJS.enc.Utf8.parse(key.repeat(3))\n    let decrypted = CryptoJS.DES.decrypt({\n      ciphertext: CryptoJS.enc.Base64.parse(text)\n    }, keyHex, {\n      mode: CryptoJS.mode.ECB,\n      padding: CryptoJS.pad.Pkcs7\n    })\n    setTextDFeistel(decrypted.toString(CryptoJS.enc.Utf8))\n  }\n\n  return (\n    \n    <section>\n      <h1>ПИ-18а 13 Вариант (Виженер + Фейстель)</h1>\n      <h2>Шифрование Вижинера</h2>\n      <form>\n        <label htmlFor=\"file\">Choose file to upload</label>\n        <input id=\"file\" name=\"fasf\" type=\"file\" accept=\".txt\" onChange={fileLoad}></input>\n        <br/>\n        <label htmlFor=\"text\">Key</label>\n        <input id=\"text\"type=\"text\" value={key} onChange={keyChanged}></input>\n      </form>\n      <label htmlFor=\"origin\"> Original Text:  </label>\n      <textarea id=\"origin\" value={textOrigin} readOnly className=\"text\"></textarea>\n      <label htmlFor=\"visionare\"> Visionare:  </label>\n      <textarea id=\"visionare\" value={textVisionare} readOnly className=\"text\"></textarea>\n      <hr/>\n      <h2>Шифрование Фейстеля</h2>\n      <label htmlFor=\"feistel\">  FeisteL: </label>\n      <textarea id=\"feistel\" value={textFeistel} readOnly className=\"text\"></textarea>\n      <label htmlFor=\"dfeistel\">  Decrypt FeisteL: </label>\n      <textarea id=\"dfeistel\" value={textDFeistel} readOnly className=\"text\"></textarea>\n    </section>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}